# üì± –ö—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–±–∏–ª—å–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

## –ü—Ä–æ–±–ª–µ–º–∞

**–ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –º–æ–≥–ª–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**, –ø–æ—Ç–æ–º—É —á—Ç–æ:
- –ë—ç–∫–µ–Ω–¥ –≤–æ–∑–≤—Ä–∞—â–∞–ª JWT —Ç–æ–∫–µ–Ω—ã **—Ç–æ–ª—å–∫–æ –≤ cookies** (–¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
- –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ–∂–∏–¥–∞–ª–æ —Ç–æ–∫–µ–Ω—ã **–≤ JSON –æ—Ç–≤–µ—Ç–µ**
- –†–µ–∑—É–ª—å—Ç–∞—Ç: `token = null` ‚Üí –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –º–æ–≥ –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É

## –†–µ—à–µ–Ω–∏–µ

### 1Ô∏è‚É£ –ë—ç–∫–µ–Ω–¥ —Ç–µ–ø–µ—Ä—å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø –∫–ª–∏–µ–Ω—Ç–∞

```javascript
const isMobileClient = req.headers['user-agent']?.includes('Dart');
```

### 2Ô∏è‚É£ –†–∞–∑–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤

| –ö–ª–∏–µ–Ω—Ç | –¢–æ–∫–µ–Ω—ã –≤ cookies | –¢–æ–∫–µ–Ω—ã –≤ JSON |
|--------|-----------------|---------------|
| **–í–µ–±** (–±—Ä–∞—É–∑–µ—Ä) | ‚úÖ –î–∞ | ‚ùå –ù–µ—Ç |
| **–ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** (Flutter) | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ |

### 3Ô∏è‚É£ –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —á–∏—Ç–∞–µ—Ç —Ç–æ–∫–µ–Ω—ã

```dart
final accessToken = responseData['accessToken'];   // ‚úÖ –¢–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç!
final refreshToken = responseData['refreshToken']; // ‚úÖ –¢–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç!
```

## –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### –ë—ç–∫–µ–Ω–¥:
- ‚úÖ `server/routes/auth.js` - endpoints `/register` –∏ `/login`

### –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
- ‚úÖ `lib/data/datasources/api_service.dart` - –º–µ—Ç–æ–¥ `register()`
- ‚úÖ `lib/presentation/pages/auth/registration_flow_page.dart` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞

## –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

### –í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ —Ä–∞–Ω—å—à–µ):
1. –û—Ç–∫—Ä–æ–π—Ç–µ https://mebelplace.com.kz
2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Ç–æ–∫–µ–Ω—ã –≤ cookies (DevTools ‚Üí Application ‚Üí Cookies)

### –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (—Ç–µ–ø–µ—Ä—å –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å):
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `flutter run` –≤ `mebelplace_demo/`
2. –í—ã–±–µ—Ä–∏—Ç–µ "–Ø –∫–ª–∏–µ–Ω—Ç" –∏–ª–∏ "–Ø –º–∞—Å—Ç–µ—Ä"
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
4. –í–≤–µ–¥–∏—Ç–µ SMS –∫–æ–¥ (–≤ DEV —Ä–µ–∂–∏–º–µ –∫–æ–¥ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
5. –î–ª—è –º–∞—Å—Ç–µ—Ä–∞: –≤–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏
6. **‚úÖ –£—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥ ‚Üí –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω**

## –õ–æ–≥–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

### ‚úÖ –£—Å–ø–µ—à–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º:
```
üì° API: POST /auth/register - user
‚úÖ API: Registration successful, tokens saved
‚úÖ Registration successful! Saving auth data...
‚úÖ Auth data saved! Navigating to home...
```

### ‚ùå –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
```
‚ùå API: Register error: ...
‚ùå Registration exception: ...
```

## –í–∞–∂–Ω–æ

- –ò–∑–º–µ–Ω–µ–Ω–∏—è **–æ–±—Ä–∞—Ç–Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã** - –≤–µ–± –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
- –û–±–∞ —Ç–∏–ø–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É—é—Ç **–æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ endpoints**
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –¥–ª—è –æ–±–µ–∏—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
2. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏–Ω –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º
3. ‚úÖ –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ refresh token —Ä–∞–±–æ—Ç–∞–µ—Ç
4. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∑–∞—â–∏—â–µ–Ω–Ω—ã–µ endpoints –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ—Å–ª–µ –≤—Ö–æ–¥–∞

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∏ –≥–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é  
**–î–∞—Ç–∞:** 28.10.2025

