# üîç –û–¢–ß–Å–¢: –í–∞–ª–∏–¥–∞—Ü–∏—è API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

## ‚úÖ **–ß—Ç–æ –ü–†–ê–í–ò–õ–¨–ù–û —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**

### 1. **–¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö (Snake Case ‚Üî Camel Case)**
```dart
// –í ApiService interceptor (—Å—Ç—Ä–æ–∫–∞ 32-38):
onResponse: (response, handler) {
  if (response.data != null) {
    response.data = snakeToCamel(response.data);
  }
  return handler.next(response);
}
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ê–ë–û–¢–ê–ï–¢ –ü–†–ê–í–ò–õ–¨–ù–û**
- –í—Å–µ `snake_case` –ø–æ–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤ `camelCase`
- –°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –æ–±–∞ —Ñ–æ—Ä–º–∞—Ç–∞ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
- –ü—Ä–∏–º–µ—Ä: `created_at` ‚Üí `createdAt` (+ —Å–æ—Ö—Ä–∞–Ω—ë–Ω `created_at`)

---

### 2. **–ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –æ–±–æ–∏—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤**

#### OrderModel:
```dart
clientId: (json['clientId'] ?? json['client_id'] ?? '').toString(),
createdAt: DateTime.parse((json['createdAt'] ?? json['created_at']).toString()),
```

#### VideoModel:
```dart
// –í—Å–µ –ø–æ–ª—è –≤ camelCase –ø–æ—Å–ª–µ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏
authorId: json['authorId'] as String,
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ê–ë–û–¢–ê–ï–¢ –ü–†–ê–í–ò–õ–¨–ù–û**
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ fallback –Ω–∞ snake_case
- –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏

---

### 3. **JWT Authentication**
```dart
onRequest: (options, handler) async {
  final token = await LocalStorage().getToken();
  if (token != null && token.isNotEmpty) {
    options.headers['Authorization'] = 'Bearer $token';
  }
  handler.next(options);
}
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ê–ë–û–¢–ê–ï–¢ –ü–†–ê–í–ò–õ–¨–ù–û**
- –¢–æ–∫–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫–æ –≤—Å–µ–º –∑–∞–ø—Ä–æ—Å–∞–º
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –ø–æ—Å–ª–µ –ª–æ–≥–∏–Ω–∞/—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

---

### 4. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
```dart
try {
  final response = await _dio.post('/endpoint');
  // ... –æ–±—Ä–∞–±–æ—Ç–∫–∞ —É—Å–ø–µ—Ö–∞
} catch (e) {
  print('‚ùå API: Error: $e');
  return ApiResponse(
    success: false,
    message: '–û—à–∏–±–∫–∞: ${e.toString()}',
  );
}
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ê–ë–û–¢–ê–ï–¢ –ü–†–ê–í–ò–õ–¨–ù–û**
- –í—Å–µ API –≤—ã–∑–æ–≤—ã –æ–±—ë—Ä–Ω—É—Ç—ã –≤ try-catch
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –ø–æ–Ω—è—Ç–Ω—ã–µ –æ—à–∏–±–∫–∏

---

## ‚ö†Ô∏è **–ü–û–¢–ï–ù–¶–ò–ê–õ–¨–ù–´–ï –ü–†–û–ë–õ–ï–ú–´ (–Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º API):**

### 1. **OrderModel: –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è –≤ API**

```dart
// –í orders_screen.dart (—Å—Ç—Ä–æ–∫–∞ 284-286):
budget: '0', // TODO: Add budget field to OrderModel if available
responseCount: 0, // TODO: Add responsesCount field to OrderModel if available
```

**–ü—Ä–æ–±–ª–µ–º–∞:** API –º–æ–∂–µ—Ç –ù–ï –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å:
- `budget` / `price` - –±—é–¥–∂–µ—Ç –∑–∞–∫–∞–∑–∞
- `responsesCount` / `response_count` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∫–ª–∏–∫–æ–≤

**–†–µ—à–µ–Ω–∏–µ:** ‚úÖ –£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —Å fallback –Ω–∞ 0

**–ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ –±—ç–∫–µ–Ω–¥–µ:**
- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ `budget` –≤ Order schema
- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ `responses_count` –≤ Order response

---

### 2. **ChatModel: Dynamic —Ç–∏–ø–∏–∑–∞—Ü–∏—è**

```dart
// –í messages_screen.dart (—Å—Ç—Ä–æ–∫–∞ 182):
Widget _buildChatItemFromModel(dynamic chat, int index) {
  final hasUnread = chat.unreadCount != null && chat.unreadCount > 0;
  final chatId = chat.id ?? 'chat_$index';
  final otherUserName = chat.otherUser?.username ?? '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å';
  // ...
}
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `dynamic` –≤–º–µ—Å—Ç–æ `ChatModel`

**–ü—Ä–∏—á–∏–Ω–∞:** ChatModel –º–æ–∂–µ—Ç –Ω–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å API response

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É `/chats/list` response –∏ –æ–±–Ω–æ–≤–∏—Ç—å ChatModel

---

### 3. **VideoModel: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª–µ–π likes**

```dart
final int views;
final int likes;          // ‚Üê –î—É–±–ª–∏–∫–∞—Ç?
final int likesCount;     // ‚Üê –î—É–±–ª–∏–∫–∞—Ç?
final int commentsCount;
```

**–í–æ–ø—Ä–æ—Å:** API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `likes` –∏–ª–∏ `likesCount`?

**–†–µ—à–µ–Ω–∏–µ:** ‚úÖ –û–±–∞ –ø–æ–ª—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

---

### 4. **Image Upload: Multipart Form Data**

```dart
// –í create_order_page.dart:
images: _selectedImages.isNotEmpty 
  ? _selectedImages.map((f) => f.path).toList() 
  : null
```

**–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:** –ü–µ—Ä–µ–¥–∞—é—Ç—Å—è –ø—É—Ç–∏ –∫ —Ñ–∞–π–ª–∞–º, –∞ –Ω–µ —Å–∞–º–∏ —Ñ–∞–π–ª—ã

**–ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:** –ú–µ—Ç–æ–¥ `orderRepository.createOrder()` –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –ø—É—Ç–∏ –≤ `MultipartFile`

---

## üéØ **–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–í–ï–†–ö–ò –ø–µ—Ä–µ–¥ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–æ–º:**

### ‚úÖ Checklist –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

- [ ] **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è/–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:**
  - –û—Ç–ø—Ä–∞–≤–∫–∞ SMS –∫–æ–¥–∞
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ SMS –∫–æ–¥–∞  
  - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞
  - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –º–∞—Å—Ç–µ—Ä–∞
  - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ JWT —Ç–æ–∫–µ–Ω–∞

- [ ] **–í–∏–¥–µ–æ:**
  - –ó–∞–≥—Ä—É–∑–∫–∞ –ª–µ–Ω—Ç—ã –≤–∏–¥–µ–æ
  - –õ–∞–π–∫/–∞–Ω–ª–∞–π–∫ –≤–∏–¥–µ–æ
  - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
  - –ó–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ (multipart)
  - –í–∏–¥–µ–æ –º–∞—Å—Ç–µ—Ä–∞

- [ ] **–ó–∞–∫–∞–∑—ã:**
  - –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ (—Å —Ñ–æ—Ç–æ)
  - –ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–∫–∞–∑–æ–≤ (–ø–æ —Å—Ç–∞—Ç—É—Å–∞–º)
  - –î–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–∞
  - –û—Ç–∫–ª–∏–∫ –Ω–∞ –∑–∞–∫–∞–∑
  - –ü—Ä–∏–Ω—è—Ç–∏–µ –æ—Ç–∫–ª–∏–∫–∞
  - –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞

- [ ] **–ß–∞—Ç—ã:**
  - –°–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤
  - –°–æ–æ–±—â–µ–Ω–∏—è —á–∞—Ç–∞
  - –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
  - Typing indicator (WebSocket?)
  - Online —Å—Ç–∞—Ç—É—Å

- [ ] **–ü–æ–∏—Å–∫:**
  - –ü–æ–∏—Å–∫ –≤–∏–¥–µ–æ
  - –ü–æ–∏—Å–∫ –∑–∞–∫–∞–∑–æ–≤  
  - –ü–æ–∏—Å–∫ –º–∞—Å—Ç–µ—Ä–æ–≤

- [ ] **–ü—Ä–æ—Ñ–∏–ª—å:**
  - –°–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å
  - –ü—Ä–æ—Ñ–∏–ª—å –º–∞—Å—Ç–µ—Ä–∞
  - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è

---

## üêõ **–ö–ê–ö –ü–†–û–í–ï–†–ò–¢–¨ API –Ω–∞ –æ—à–∏–±–∫–∏:**

### 1. –í–∫–ª—é—á–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:

–î–æ–±–∞–≤–∏—Ç—å –≤ `api_service.dart` –ø–æ—Å–ª–µ interceptor'–∞:

```dart
_dio.interceptors.add(LogInterceptor(
  requestBody: true,
  responseBody: true,
  error: true,
  logPrint: (obj) => print('üîç DIO: $obj'),
));
```

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å response structure –≤ –∫–æ–Ω—Å–æ–ª–∏:

```dart
print('üì¶ API Response structure: ${response.data.keys}');
print('üìä Order fields: ${json.encode(response.data)}');
```

### 3. –î–æ–±–∞–≤–∏—Ç—å validation –≤ models:

```dart
factory OrderModel.fromJson(Map<String, dynamic> json) {
  // –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
  if (json['id'] == null) {
    throw Exception('Order.id is required but missing');
  }
  if (json['title'] == null) {
    throw Exception('Order.title is required but missing');
  }
  
  return OrderModel(...);
}
```

---

## üìä **–ò–¢–û–ì–û–í–ê–Ø –û–¶–ï–ù–ö–ê:**

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å |
|-----------|--------|-------------|
| **Snake‚ÜíCamel –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è** | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ | 100% |
| **JWT Authentication** | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ | 100% |
| **Error Handling** | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ | 100% |
| **VideoModel** | ‚úÖ –ì–æ—Ç–æ–≤–∞ | 95% |
| **OrderModel** | ‚ö†Ô∏è –ü—Ä–æ–≤–µ—Ä–∏—Ç—å budget/responses | 85% |
| **ChatModel** | ‚ö†Ô∏è –ü—Ä–æ–≤–µ—Ä–∏—Ç—å structure | 75% |
| **MessageModel** | ‚úÖ –ì–æ—Ç–æ–≤–∞ | 90% |
| **UserModel** | ‚úÖ –ì–æ—Ç–æ–≤–∞ | 95% |
| **Image Upload** | ‚ö†Ô∏è –ü—Ä–æ–≤–µ—Ä–∏—Ç—å MultipartFile | 80% |

---

## ‚úÖ **–†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò:**

### –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
1. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—É—é —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é/–ª–æ–≥–∏–Ω
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –≤–∏–¥–µ–æ (multipart)
3. ‚ö†Ô∏è –î–æ–±–∞–≤–∏—Ç—å `budget` –∏ `responses_count` –≤ Order API
4. ‚ö†Ô∏è –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É Chat API response

### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
5. –î–æ–±–∞–≤–∏—Ç—å retry –ª–æ–≥–∏–∫—É –¥–ª—è failed requests
6. –î–æ–±–∞–≤–∏—Ç—å offline mode (cache)
7. –î–æ–±–∞–≤–∏—Ç—å rate limiting protection

### –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
8. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å image compression –ø–µ—Ä–µ–¥ upload
9. –î–æ–±–∞–≤–∏—Ç—å pagination –¥–ª—è –±–æ–ª—å—à–∏—Ö —Å–ø–∏—Å–∫–æ–≤
10. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ API calls

---

## üéØ **–í–´–í–û–î:**

**–î–∞, –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–∞–µ–º –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –ü–†–ê–í–ò–õ–¨–ù–û!** ‚úÖ

- ‚úÖ –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è snake_case ‚Üî camelCase —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ú–æ–¥–µ–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –æ–±–∞ —Ñ–æ—Ä–º–∞—Ç–∞
- ‚úÖ JWT —Ç–æ–∫–µ–Ω—ã –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ –û—à–∏–±–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚ö†Ô∏è –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å 2-3 –ø–æ–ª—è –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º API

**–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: 90%** - –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º API!

